<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="search">
	
     <!-- 모든 list 불러오기  -->
<!-- 	 <select id="allList" resultType="map"> -->
<!-- 	 SELECT *  -->
<!-- 	 FROM SUPPORTERS_UPLOAD s -->
<!-- 	 INNER JOIN THEMA t -->
<!-- 	 ON s.THEMANUM=t.THEMANUM -->
<!-- 	 INNER JOIN INFO_UPLOAD i -->
<!-- 	 ON t.THEMANUM=i.THEMANUM -->
<!-- 	 INNER JOIN INFO_UPLOAD_IMG img -->
<!-- 	 IN i.INFOUPNUM=img.INFONUM -->
<!-- 	 INNER JOIN LOCATION lo -->
<!-- 	 ON i.LOCALNUM=lo.LOCALNUM -->
<!-- 	 </select> -->
	  
	<!--메인테마조회 -->
	  <select id="themaList1" resultType="map" parameterType="map">
	 SELECT * 
	 FROM SUPPORTERS_UPLOAD s
	 INNER JOIN THEMA t
	 ON s.THEMANUM=t.THEMANUM
	 INNER JOIN INFO_UPLOAD i
	 ON t.THEMANUM=i.THEMANUM
	 INNER JOIN INFO_UPLOAD_IMG img
	 IN i.INFOUPNUM=img.INFONUM
	 INNER JOIN LOCATION lo
	 ON i.LOCALNUM=lo.LOCALNUM
	 WHERE i.THEMANUM=#{themanum} OR t.THEMANUMREF=#{themanumref}
	</select>
	  
	<!--서브테마 조회 -->
	  <select id="themaList2" resultType="map" parameterType="_int">
	 SELECT * 
	 FROM SUPPORTERS_UPLOAD s
	 INNER JOIN THEMA t
	 ON s.THEMANUM=t.THEMANUM
	 INNER JOIN INFO_UPLOAD i
	 ON t.THEMANUM=i.THEMANUM
	 INNER JOIN INFO_UPLOAD_IMG img
	 IN i.INFOUPNUM=img.INFONUM
	 INNER JOIN LOCATION lo
	 ON i.LOCALNUM=lo.LOCALNUM
	 WHERE i.THEMANUM=#{themaNum}
	  </select>
	  
	   <!--지역별조회 -->
	  <select id="localList" resultType="map" parameterType="_int">
	 SELECT * 
	 FROM SUPPORTERS_UPLOAD s
	 INNER JOIN THEMA t
	 ON s.THEMANUM=t.THEMANUM
	 INNER JOIN INFO_UPLOAD i
	 ON t.THEMANUM=i.THEMANUM
	 INNER JOIN INFO_UPLOAD_IMG img
	 IN i.INFOUPNUM=img.INFONUM
	 INNER JOIN LOCATION lo
	 ON i.LOCALNUM=lo.LOCALNUM
	 WHERE lo.LOCALNUM=#{localNum}
	    </select>
  
  
 </mapper>
