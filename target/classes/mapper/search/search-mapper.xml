<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="search">
	

	 <select id="allList" resultType="map">
	 SELECT *
	 FROM INFO_UPLOAD i
	 INNER JOIN THEMA t
	 ON i.THEMANUM=t.THEMANUM
	 INNER JOIN INFO_UPLOAD_IMG img
	 ON i.INFOUPNUM=img.INFOUPNUM
	 INNER JOIN LOCATION lo
	 ON i.LOCALNUM=lo.LOCALNUM
	
	 </select>
	  
	<!--메인테마조회 -->
	  <select id="themaList1" resultType="com.mgr.merry.info.model.vo.InfoUpload" parameterType="map">
	
	 SELECT *
	 FROM INFO_UPLOAD i
	 INNER JOIN THEMA t
	 ON i.THEMANUM=t.THEMANUM
	 INNER JOIN INFO_UPLOAD_IMG img
	 ON i.INFOUPNUM=img.INFOUPNUM
	 INNER JOIN LOCATION lo
	 ON i.LOCALNUM=lo.LOCALNUM
	 WHERE i.THEMANUM=#{themaNum} OR t.THEMANUMREF=#{themaNumRef}
	 
	</select>
	  
	<!--서브테마 조회 -->
	  <select id="themaList2" resultType="com.mgr.merry.info.model.vo.InfoUpload" parameterType="map">
	 SELECT *
	 FROM INFO_UPLOAD i
	 INNER JOIN THEMA t
	 ON i.THEMANUM=t.THEMANUM
	 INNER JOIN INFO_UPLOAD_IMG img
	 ON i.INFOUPNUM=img.INFOUPNUM
	 INNER JOIN LOCATION lo
	 ON i.LOCALNUM=lo.LOCALNUM
	 WHERE i.THEMANUM=#{themaNum}
	  </select>
	  
	   <!--지역별조회 -->
	  <select id="localList" resultType="com.mgr.merry.info.model.vo.InfoUpload" parameterType="_int">
	 SELECT *
	 FROM INFO_UPLOAD I
	 INNER JOIN THEMA T
	 ON I.THEMANUM=T.THEMANUM
	 INNER JOIN INFO_UPLOAD_IMG img
	 ON i.INFOUPNUM=img.INFOUPNUM
	 INNER JOIN LOCATION lo
	 ON i.LOCALNUM=lo.LOCALNUM
	 WHERE lo.LOCALNUM=#{localNum}
	    </select>
  
  
 </mapper>
